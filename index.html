<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Type2 rasterizer</title>
    <style>
      html, body { height: 100%; overflow: hidden; margin: 0; padding: 5px; }
      textarea, svg {
        display: block;
        float: left;
        border: 1px solid black;
        margin: 0;
        padding: 0;
        margin-right: 5px;
      }
      textarea {
        width: 30em;
        height: calc(100% - 20px);
      }
      svg {
        width: calc(100% - 28em);
        height: calc(100% - 20px);
        transform: scale(1, -1);
      }
    </style>
    <script src="convert.js"></script>
  </head>
  <body>
    <textarea id="outlines">
//
//  Test outline using custom subroutines.
//
//  - "num sin" -> sin(v)
//    Sine over [0,1].
//  - "num cos" -> cos(v)
//    Cosine.
//  - "phi ox oy x y rotate" -> x' y'
//    Coordinate rotation by phi over (ox,oy).
//  - "move"
//    Rotation input preserving rmoveto.
//  - "line" for rotation-input-preserving
//    Rotation input preserving rlineto.
//

    0.1  // rotation angle
    40   // origin x
    40   // origin y

    0    0  rotate move
    0  500  rotate line
  500    0  rotate line
    0 -500  rotate line
 -500    0  rotate line

#  100  100  rotate move
#  500    0  rotate line
#    0  500  rotate line
# -500    0  rotate line
#    0 -500  rotate line

  // rotation argument cleanup
  drop drop drop

endchar
</textarea>

    <svg>
      <g fill="white">
        <path fill="rgba(0,0,0,0.3)" stroke="red" d=""></path>
      </g>
    </svg>

    <script src="rasterizer.js"></script>
  </body>
</html>